<div class="transaction-form">
  <h3>Neue Transaktion</h3>
  
  <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()" class="form">
    <!-- Beschreibung -->
    <div class="form-group">
      <label for="description">Beschreibung</label>
      <input 
        id="description"
        type="text" 
        formControlName="description"
        class="form-control"
        [class.error]="description?.invalid && description?.touched"
        placeholder="z.B. Einkauf, Gehalt..."
      >
      @if (description?.invalid && description?.touched) {
        <div class="error-message">
          @if (description?.errors?.['required']) {
            Beschreibung ist erforderlich
          }
          @if (description?.errors?.['minlength']) {
            Mindestens 3 Zeichen erforderlich
          }
        </div>
      }
    </div>

    <!-- Betrag -->
    <div class="form-group">
      <label for="amount">Betrag (€)</label>
      <input 
        id="amount"
        type="number" 
        formControlName="amount"
        class="form-control"
        [class.error]="amount?.invalid && amount?.touched"
        placeholder="0.00"
        step="0.01"
        min="0"
      >
      @if (amount?.invalid && amount?.touched) {
        <div class="error-message">
          @if (amount?.errors?.['required']) {
            Betrag ist erforderlich
          }
          @if (amount?.errors?.['min']) {
            Betrag muss größer als 0 sein
          }
        </div>
      }
    </div>

    <!-- Typ -->
    <div class="form-group">
      <label for="type">Typ</label>
      <select 
        id="type"
        formControlName="type"
        class="form-control"
      >
        <option value="income">Einnahme</option>
        <option value="expense">Ausgabe</option>
      </select>
    </div>

    <!-- Datum -->
    <div class="form-group">
      <label for="date">Datum</label>
      <input 
        id="date"
        type="date" 
        formControlName="date"
        class="form-control"
        [class.error]="date?.invalid && date?.touched"
      >
      @if (date?.invalid && date?.touched) {
        <div class="error-message">
          Datum ist erforderlich
        </div>
      }
    </div>

    <!-- Submit Button -->
    <button 
      type="submit" 
      class="btn btn-primary"
      [disabled]="transactionForm.invalid || isSubmitting"
    >
      @if (isSubmitting) {
        Speichern...
      } @else {
        Transaktion hinzufügen
      }
    </button>
  </form>
</div>
